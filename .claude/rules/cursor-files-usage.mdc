---
description: Enforce generous use of .cursor files (rules, memories, hooks, commands, tools) during development
globs: packages/plugin-eliza/src/**/*.ts
alwaysApply: true
---

# Cursor Files Usage Enforcement

> **MANDATORY**: Use .cursor files generously and often during development.

## Core Principle

The `.cursor/` directory contains **73+ files** specifically created to help you work effectively on the Hyperscape plugin. These files include rules, memories, hooks, commands, and tools that provide patterns, references, and automation. **You MUST use them generously and often.**

## Required Usage Patterns

### Before ANY Implementation

**MANDATORY CHECKLIST** - Complete ALL before writing code:

1. ✅ **Check Relevant Rules**
   - Review rule files in `.cursor/rules/` for your component type
   - Check `plugin-eliza-*.mdc` files for patterns
   - Review `elizaos-*.mdc` files for ElizaOS patterns
   - Check `hyperscape-*.mdc` files for engine patterns

2. ✅ **Review Memory Files**
   - Check `.cursor/memory/agent-project-context.md` for project context
   - Check `.cursor/memory/agent-development-patterns.md` for code patterns
   - Check `.cursor/memory/agent-workflow-procedures.md` for workflows
   - Review relevant `elizaos-*.md` files for ElizaOS documentation

3. ✅ **Use Custom Commands**
   - Use `/elizaos-research <topic>` to research ElizaOS patterns
   - Use `/elizaos-validate <file>` to validate code after implementation
   - Reference `.cursor/memory/commands-index.md` for command usage

4. ✅ **Check Existing Code**
   - Search codebase for similar implementations
   - Review existing patterns in `packages/plugin-eliza/src/`
   - Check for code reuse opportunities

5. ✅ **Reference Index Files**
   - Check `.cursor/memory/master-index.md` for complete overview
   - Check `.cursor/memory/rules-index.md` for all rules
   - Check `.cursor/README.md` for directory structure

### During Implementation

**MANDATORY**: Reference .cursor files continuously:

1. ✅ **Follow Patterns from Memories**
   - Use templates from `agent-development-patterns.md`
   - Follow workflows from `agent-workflow-procedures.md`
   - Reference patterns from `elizaos-*.md` files

2. ✅ **Check Rules for Compliance**
   - Verify error handling follows `plugin-eliza-error-handling.mdc`
   - Verify logging follows `plugin-eliza-logging.mdc`
   - Verify security follows `plugin-eliza-security.mdc`
   - Verify performance follows `plugin-eliza-performance.mdc`

3. ✅ **Use Hooks for Validation**
   - Hooks automatically check for violations
   - Review hook output for warnings
   - Fix violations immediately

### After Implementation

**MANDATORY**: Validate using .cursor files:

1. ✅ **Validate Code**
   - Use `/elizaos-validate <file>` to check against patterns
   - Review hook violations
   - Check TypeScript errors

2. ✅ **Update Documentation**
   - Update memories if patterns change
   - Add examples to `agent-development-patterns.md` if new patterns emerge
   - Update workflows in `agent-workflow-procedures.md` if procedures change

## Component-Specific Usage

### When Creating Actions

**MANDATORY FILES TO CHECK**:
- `.cursor/rules/plugin-eliza-actions.mdc`
- `.cursor/rules/plugin-eliza-action-patterns.mdc`
- `.cursor/rules/plugin-eliza-error-handling.mdc`
- `.cursor/memory/elizaos-action-patterns.md`
- `.cursor/memory/agent-development-patterns.md` (Action templates)
- `.cursor/memory/agent-workflow-procedures.md` (Action creation workflow)

**MANDATORY COMMANDS**:
- `/elizaos-research action interface`
- `/elizaos-validate packages/plugin-eliza/src/actions/my-action.ts`

### When Creating Providers

**MANDATORY FILES TO CHECK**:
- `.cursor/rules/plugin-eliza-providers.mdc`
- `.cursor/rules/plugin-eliza-provider-patterns.mdc`
- `.cursor/rules/plugin-eliza-providers-runtime.mdc`
- `.cursor/rules/plugin-eliza-performance.mdc`
- `.cursor/memory/elizaos-providers.md`
- `.cursor/memory/agent-development-patterns.md` (Provider templates)

**MANDATORY COMMANDS**:
- `/elizaos-research provider patterns`
- `/elizaos-validate packages/plugin-eliza/src/providers/my-provider.ts`

### When Creating Services

**MANDATORY FILES TO CHECK**:
- `.cursor/rules/plugin-eliza-services-runtime.mdc`
- `.cursor/rules/plugin-eliza-service-managers.mdc`
- `.cursor/rules/plugin-eliza-error-handling.mdc`
- `.cursor/rules/plugin-eliza-security.mdc`
- `.cursor/memory/elizaos-services.md`
- `.cursor/memory/agent-development-patterns.md` (Service templates)

**MANDATORY COMMANDS**:
- `/elizaos-research service lifecycle`
- `/elizaos-validate packages/plugin-eliza/src/services/my-service.ts`

### When Creating Event Handlers

**MANDATORY FILES TO CHECK**:
- `.cursor/rules/plugin-eliza-events-runtime.mdc`
- `.cursor/rules/plugin-eliza-error-handling.mdc`
- `.cursor/memory/elizaos-events.md`
- `.cursor/memory/agent-development-patterns.md` (Error handling patterns)

### When Testing

**MANDATORY FILES TO CHECK**:
- `.cursor/rules/testing.mdc`
- `.cursor/rules/plugin-eliza-systems-testing.mdc`
- `.cursor/memory/agent-workflow-procedures.md` (Testing workflow)

## File Reference Guide

### Rules (39 files)
**Location**: `.cursor/rules/`

**Key Rules**:
- `plugin-eliza-core-principles.mdc` - Start here for architecture
- `plugin-eliza-actions.mdc` - Action patterns
- `plugin-eliza-providers.mdc` - Provider patterns
- `plugin-eliza-services-runtime.mdc` - Service patterns
- `plugin-eliza-error-handling.mdc` - Error handling
- `plugin-eliza-logging.mdc` - Logging patterns
- `plugin-eliza-performance.mdc` - Performance optimization
- `plugin-eliza-security.mdc` - Security patterns

**Complete Index**: `.cursor/memory/rules-index.md`

### Memories (20 files)
**Location**: `.cursor/memory/`

**Key Memories**:
- `agent-project-context.md` - Complete project context
- `agent-development-patterns.md` - All code patterns and templates
- `agent-workflow-procedures.md` - Standard workflows
- `master-index.md` - Complete index of everything
- `elizaos-docs-index.md` - ElizaOS documentation index
- `elizaos-reference.md` - Complete API reference

**Complete Index**: `.cursor/memory/master-index.md`

### Hooks (10 files)
**Location**: `.cursor/hooks/`

**Key Hooks**:
- `cursor-files-reminder.sh` - Reminds to use .cursor files (THIS HOOK)
- `enforce-plugin-rules.sh` - Rule enforcement
- `eliza-docs-hook.sh` - Documentation suggestions
- `research-reminder.sh` - Research enforcement

**Complete Index**: `.cursor/memory/hooks-index.md`

### Commands (2 commands)
**Location**: `.cursor/commands/`

**Commands**:
- `/elizaos-research <topic>` - Research ElizaOS patterns
- `/elizaos-validate <file>` - Validate code against patterns

**Complete Index**: `.cursor/memory/commands-index.md`

### Tools (1 tool)
**Location**: `.cursor/tools/`

**Tool**:
- `doc-visitor.sh` - Documentation visitor (used by hooks)

**Complete Index**: `.cursor/memory/tools-index.md`

## Usage Frequency Requirements

### High Frequency (Every Implementation)
- ✅ Check relevant rule files
- ✅ Review memory files for patterns
- ✅ Use `/elizaos-research` for ElizaOS patterns
- ✅ Follow templates from `agent-development-patterns.md`

### Medium Frequency (Every Component)
- ✅ Use `/elizaos-validate` after implementation
- ✅ Review hook violations
- ✅ Check index files for overview

### Low Frequency (Periodic Updates)
- ✅ Update memories if patterns change
- ✅ Add new patterns to `agent-development-patterns.md`
- ✅ Update workflows if procedures change

## Forbidden Patterns

❌ **NEVER**:
- Skip checking rule files before implementation
- Ignore memory files with patterns
- Skip using `/elizaos-research` for ElizaOS patterns
- Skip using `/elizaos-validate` after implementation
- Ignore hook violations
- Skip reviewing existing code
- Skip checking index files

## Required Patterns

✅ **ALWAYS**:
- Check relevant rule files before implementation
- Review memory files for patterns and templates
- Use `/elizaos-research` for ElizaOS patterns
- Use `/elizaos-validate` after implementation
- Follow templates from `agent-development-patterns.md`
- Follow workflows from `agent-workflow-procedures.md`
- Reference `agent-project-context.md` for project context
- Check index files for complete overview
- Review hook violations and fix them
- Update memories if patterns change

## Verification Checklist

Before considering work complete, verify:

- [ ] Checked relevant rule files
- [ ] Reviewed memory files for patterns
- [ ] Used `/elizaos-research` for ElizaOS patterns
- [ ] Used `/elizaos-validate` after implementation
- [ ] Followed templates from memories
- [ ] Reviewed hook violations
- [ ] Checked existing code for similar implementations
- [ ] Referenced index files for overview
- [ ] Updated memories if patterns changed

## Integration with Other Rules

This rule works with:
- **All plugin-eliza-*.mdc rules** - Provides patterns to follow
- **All elizaos-*.mdc rules** - Provides ElizaOS patterns
- **All memory files** - Provides references and templates
- **All hooks** - Provides automatic validation
- **All commands** - Provides research and validation tools

## Quick Reference

### Most Important Files
1. `.cursor/memory/agent-project-context.md` - Project context
2. `.cursor/memory/agent-development-patterns.md` - Code patterns
3. `.cursor/memory/agent-workflow-procedures.md` - Workflows
4. `.cursor/memory/master-index.md` - Complete index
5. `.cursor/rules/plugin-eliza-core-principles.mdc` - Core principles

### Most Important Commands
1. `/elizaos-research <topic>` - Research patterns
2. `/elizaos-validate <file>` - Validate code

### Most Important Hooks
1. `cursor-files-reminder.sh` - Reminds to use .cursor files
2. `enforce-plugin-rules.sh` - Rule enforcement
3. `eliza-docs-hook.sh` - Documentation suggestions

## Summary

**The .cursor directory has 73+ files created specifically to help you work effectively. Use them generously and often!**

- ✅ **39 Rules** - Comprehensive development guidelines
- ✅ **20 Memories** - Complete reference documentation
- ✅ **10 Hooks** - Automatic rule enforcement
- ✅ **2 Commands** - Research and validation
- ✅ **1 Tool** - Documentation visitor

**Remember**: These files exist to help you. Use them generously!

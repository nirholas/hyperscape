# ==========================================
# HYPERSCAPE SERVER CONFIGURATION
# ==========================================
# Copy this file to .env and customize values for your environment.
# All PUBLIC_* variables are exposed to the client via /env.js endpoint.
#
# For split deployments (client on Vercel, server on Railway):
#   - PRIVY_APP_ID here must match PUBLIC_PRIVY_APP_ID in client
#   - Client's PUBLIC_WS_URL and PUBLIC_API_URL must point to this server
#
# See also: packages/client/.env.example for client deployment vars

# ==========================================
# CORE CONFIGURATION
# ==========================================

# The world folder to load (relative to server package root)
# Contains world.json, assets/, and world-specific data
WORLD=world

# The HTTP port the server listens on
PORT=5555

# Node environment: development, production, staging, or test
# Affects logging, error reporting, and security settings
NODE_ENV=development

# ==========================================
# SECURITY & AUTHENTICATION
# ==========================================

# JWT secret for signing authentication tokens
# REQUIRED in production - generate with: openssl rand -base64 32
# WARNING: Never commit production secrets to git!
JWT_SECRET=hyper

# Admin code for in-game admin access (type /admin <code> in chat)
# Leave blank to allow anyone to be admin (development only!)
# REQUIRED in production for security
ADMIN_CODE=

# ==========================================
# DATABASE CONFIGURATION
# ==========================================

# Option 1: Use local PostgreSQL via Docker (default for development)
# Set to "true" to automatically start PostgreSQL in Docker
# Set to "false" to use external database (requires DATABASE_URL)
USE_LOCAL_POSTGRES=true

# Docker PostgreSQL configuration (only used if USE_LOCAL_POSTGRES=true)
POSTGRES_CONTAINER=hyperscape-postgres
POSTGRES_USER=hyperscape
POSTGRES_PASSWORD=hyperscape_dev
POSTGRES_DB=hyperscape
POSTGRES_PORT=5432
POSTGRES_IMAGE=postgres:16-alpine

# Option 2: External PostgreSQL connection (production)
# Format: postgresql://user:password@host:port/database
# Takes precedence over USE_LOCAL_POSTGRES if set
# DATABASE_URL=postgresql://user:password@host:5432/database

# ==========================================
# ASSETS & CDN CONFIGURATION
# ==========================================

# CDN base URL for serving game assets (models, textures, audio)
# Development: Local nginx server (see docker-compose.yml)
# Production: R2, S3, or other CDN service
PUBLIC_CDN_URL=http://localhost:8080

# WebSocket URL for client connections
# Must match your deployment domain and protocol (ws:// or wss://)
PUBLIC_WS_URL=ws://localhost:5555/ws

# API base URL for client HTTP requests (uploads, actions, etc.)
PUBLIC_API_URL=http://localhost:5555/api

# ==========================================
# GAME CONFIGURATION
# ==========================================

# Auto-save interval in seconds
# How often to persist player data and world state to database
# Set to 0 to disable periodic saving (manual save only)
SAVE_INTERVAL=60

# Enable player-to-player collision physics
# true = players block each other, false = players pass through
PUBLIC_PLAYER_COLLISION=false

# Maximum file size for uploads in megabytes (models, textures, etc.)
# Prevents disk exhaustion from large file uploads
PUBLIC_MAX_UPLOAD_SIZE=12

# ==========================================
# OPTIONAL: ELIZAOS AI INTEGRATION
# ==========================================
# ElizaOS provides AI agent management
# API URL for connecting to ElizaOS server
ELIZAOS_API_URL=http://localhost:4001

# ==========================================
# OPTIONAL: PRIVY AUTHENTICATION
# ==========================================
# Privy provides wallet-based and social authentication
# Sign up at: https://privy.io

# Privy application ID (public, safe to expose to clients)
PUBLIC_PRIVY_APP_ID=

# Privy application secret (private, server-only)
# NEVER expose this to clients or commit to git
PRIVY_APP_SECRET=

# ==========================================
# OPTIONAL: FARCASTER INTEGRATION
# ==========================================
# Farcaster social authentication and integration
# Learn more: https://www.farcaster.xyz/

# Enable Farcaster authentication
# PUBLIC_ENABLE_FARCASTER=true

# Your application's public URL (required for Farcaster)
# PUBLIC_APP_URL=https://yourdomain.com

# ==========================================
# OPTIONAL: LIVEKIT VOICE CHAT
# ==========================================
# LiveKit provides real-time voice communication
# Sign up at: https://livekit.io

# LiveKit server WebSocket URL
# LIVEKIT_URL=wss://your-livekit-server.com

# LiveKit API credentials
# LIVEKIT_API_KEY=your-livekit-key
# LIVEKIT_API_SECRET=your-livekit-secret

# ==========================================
# OPTIONAL: ADVANCED CONFIGURATION
# ==========================================

# Custom systems path for loading additional game systems
# Allows extending the server with custom TypeScript systems
# SYSTEMS_PATH=/path/to/custom/systems

# Git commit hash (auto-populated by CI/CD)
# Used for version tracking and deployment verification
# COMMIT_HASH=abc123def456

# Disable rate limiting (development only!)
# Set to "true" to disable rate limiting for easier local testing
# NEVER disable in production - exposes server to abuse and DDoS
DISABLE_RATE_LIMIT=false

# ==========================================
# DEVELOPMENT NOTES
# ==========================================
#
# Quick Start (Development):
# 1. Copy this file: cp .env.example .env
# 2. Run: npm run dev
# 3. Server starts at http://localhost:5555
# 4. PostgreSQL starts automatically in Docker
#
# Production Checklist:
# 1. Set NODE_ENV=production
# 2. Generate secure JWT_SECRET (32+ characters)
# 3. Set ADMIN_CODE to prevent unauthorized admin access
# 4. Configure DATABASE_URL for production database
# 5. Set PUBLIC_CDN_URL to your CDN domain
# 6. Update PUBLIC_WS_URL and PUBLIC_API_URL to production domains
# 7. Configure SSL certificates for wss:// and https://
#
# Environment Variable Loading Order:
# 1. .env file in server package (./packages/server/.env)
# 2. .env file in parent directory (./packages/.env)
# 3. .env file in workspace root (./../../.env)
# 4. System environment variables (highest priority)
#
# ==========================================
